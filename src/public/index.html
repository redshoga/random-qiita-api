<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Random Qiita</title>
</head>
<body>
  <h1>Random Qiita</h1>
  <p>
    Qiitaの最新の10000件の記事からランダムでURLを表示するよ!
    👉<a href="https://github.com/redshoga/random-qiita-api">GitHub</a>
  </p>
  <button onclick="addUrl()">ランダムURLを取得</button>
  <ul id="link-container"></ul>

  <script>
    function addUrl() {
      const linkContainer = document.getElementById("link-container");
      const request = new XMLHttpRequest();
      request.open("get", "https://us-central1-random-qiita-api-be836.cloudfunctions.net/get", false);
      request.onload = (event) => {
        const res = JSON.parse(request.responseText);
        const url = res.url;
        const title = res.title;

        const aElement = document.createElement('a');
        aElement.href = url;
        aElement.target = "_blank";
        aElement.innerText = title;
        const liElement = document.createElement('li');
        liElement.appendChild(aElement);
        linkContainer.appendChild(liElement);
      };
      request.send(null);
    }
  </script>
</body>
</html>
